# Zeabur Deployment Configuration
# https://zeabur.com/docs/template/template-in-code

services:
  # Main Next.js Application
  - name: hireready
    type: github
    root: /
    # Match the PORT defined in Dockerfile
    port: 5555
    env:
      # Better Auth
      BETTER_AUTH_URL: https://${ZEABUR_WEB_URL}
      BETTER_AUTH_SECRET: ${BETTER_AUTH_SECRET}
      # Google OAuth
      GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
      GOOGLE_CLIENT_SECRET: ${GOOGLE_CLIENT_SECRET}
      # Gemini API
      GEMINI_API_KEY: ${GEMINI_API_KEY}
      # Database (auto-linked from PostgreSQL service)
      DATABASE_URL: postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DATABASE}
      # Redis (auto-linked from Redis service)
      REDIS_URL: redis://:${REDIS_PASSWORD}@${REDIS_HOST}:6379
      # Public
      NEXT_PUBLIC_APP_URL: https://${ZEABUR_WEB_URL}

  # PostgreSQL Database
  - name: postgres
    type: postgres
    version: 16

  # Redis
  - name: redis
    type: redis
    version: 7
